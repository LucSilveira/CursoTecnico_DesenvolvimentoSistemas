<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body onload="Listar()">
    <form class="formulario">
        <input type="text" id="nome">
        <input type="text" id="email">
        <input type="text" id="telefone">

        <button id="cadastrar" type="submit">Cadastrar</button>
        <button id="remover" type="submit">Remover</button>
    </form>

    <table>
        <caption>Usuários</caption>
        <thead>
            <th>
                Nome do usuário
            </th>
            <th>
                Email
            </th>
            <th>
                Telefone
            </th>
        </thead>
        <tbody id="table-lista">

        </tbody>
    </table>

    <script>
        let usuarios = [{nome : "Usuário teste", email : "usuario@email.com", telefone : "11954864215"}]
        let btnCadastrar = document.querySelector("#cadastrar");
        let btnRemover = document.querySelector("#remover");

        function Listar(){
            let corpoTabela = document.getElementById("table-lista");

            corpoTabela.innerHTML = "";
            let colunaNome, colunaEmail, colunaTelefone, linha;

            usuarios.forEach(user => {
                linha = document.createElement('tr');
                colunaNome = document.createElement('td');
                colunaEmail = document.createElement('td');
                colunaTelefone = document.createElement('td');

                console.log(user.nome, user.email, user.telefone)
                console.log(JSON.stringify(usuarios));

                colunaNome.innerHTML = user.nome;
                linha.appendChild(colunaNome);

                colunaEmail.innerHTML = user.email;
                linha.appendChild(colunaEmail);

                colunaTelefone.innerHTML = user.telefone;
                linha.appendChild(colunaTelefone);

                corpoTabela.appendChild(linha);
            })

            btnCadastrar.addEventListener('click', function(event){
                event.preventDefault();

                let nome = document.getElementById('nome');
                let email = document.getElementById('email');
                let telefone = document.getElementById('telefone')

                let usuario = {
                    nome : nome.value,
                    email : email.value,
                    telefone : telefone.value
                }

                usuarios.push(usuario);

                Listar();

                nome.innerHTML = "";
                email.innerHTML = "";
                telefone.innerHTML = "";
            });

            btnRemover.addEventListener('click', function(event){
                event.preventDefault();

                let usuario = document.getElementById('email');

                let indexUsuario = usuarios.indexOf(usuario.value);

                if(indexUsuario > -1){
                    usuarios.splice(indexUsuario, 1);
                
                }else{
                    alert('Usuário não encontrado')
                }

                Listar();
            })
        }
    </script>
</body>
</html>